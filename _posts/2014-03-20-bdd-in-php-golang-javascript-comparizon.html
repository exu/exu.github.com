---
layout: post
title: BDD with 3 languages - PHP with PHPSpec, Golang with Ginkgo and Javascript with Mocha
date: 2014-03-15 07:16:59 UTC
updated: 2014-03-15 10:00:59 UTC
comments: true
category: programming
tags: [tdd, bdd, spec, php, phpspec, go, golang, ginkgo, javascript, mocha]
---
{% include JB/setup %}

<img src="/assets/img/php-js-go-bdd.png" class="img-responsive" alt="">


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Sharpening Your SpecBDD skills</h2>
<div class="outline-text-2" id="text-1">
<p>
In these series I want to show differences (or similarities) between PHP,
Google's Golang, and Javascript when you want to develop your code
with BDD techniques. Why? One of reason is that You can easily port your specs to
other language, spec is your project and your documentation and if you want learn
some new language and You have already written what should be done then half of
your work is done already. I was really suprised how easily I ported specs from
Go to javascript.
</p>

<p>
Idea to do some simple BDD excercises came from <a href="http://www.wiredtothemoon.com/2012/12/12-tdds-of-christmas/">http://www.wiredtothemoon.com/2012/12/12-tdds-of-christmas/</a>.
First I 've done that in PHP, after that I want to try the same in Golang which I was playing with,
and because I'm doing some javascript research recently so I've wrote first excercises in Javascript too.
</p>

<p>
I have my solutions in 3 separate repositories one per language (+ bdd framework)
</p>
<ul class="org-ul">
<li>PHP - <a href="https://github.com/exu/php-12bdds">https://github.com/exu/php-12bdds</a>
</li>
<li>Golang - <a href="https://github.com/exu/bddgo">https://github.com/exu/bddgo</a>
</li>
<li>Javascript - <a href="https://github.com/exu/jsbdds">https://github.com/exu/jsbdds</a>
</li>
</ul>

<p>
If You start your adventure with SpecBDD It'll be great boost for You to do whis <b>wiredtothemoon</b>
excercises. If You have some ideas how to improve some of this excercises I'll be happy to hear
about it.
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Completed excercises</h2>
<div class="outline-text-2" id="text-2">
<p>
Here will be updates about my completed excercises.
</p>

<table class="table table-stripped" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="right" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="right">No</th>
<th scope="col" class="left">Excercise</th>
<th scope="col" class="left">PHP</th>
<th scope="col" class="left">Golang</th>
<th scope="col" class="left">Javascript</th>
</tr>
</thead>
<tbody>
<tr>
<td class="right">1</td>
<td class="left">Calculations</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc01/CalcStatsSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc01/CalcStats.php">src</a> <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-php-with-phpspec">blog</a></td>
<td class="left"><a href="https://github.com/exu/bddgo/blob/master/stats_test.go">spec</a> <a href="https://github.com/exu/bddgo/blob/master/stats.go">src</a> <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-golang-and-ginkgo">blog</a></td>
<td class="left"><a href="https://github.com/exu/jsbdds/blob/master/test/numnames.js">spec</a> <a href="https://github.com/exu/jsbdds/blob/master/numnames.js">src</a> <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-javascript-with-mocha">blog</a></td>
</tr>

<tr>
<td class="right">2</td>
<td class="left">Numbers spelling</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc02/NumberNamesSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc02/NumberNames.php">src</a></td>
<td class="left"><a href="https://github.com/exu/bddgo/blob/master/numnames_test.go">spec</a> <a href="https://github.com/exu/bddgo/blob/master/numnames.go">src</a></td>
<td class="left"><a href="https://github.com/exu/jsbdds/blob/master/test/numnames.js">spec</a> <a href="https://github.com/exu/jsbdds/blob/master/numnames.js">src</a></td>
</tr>

<tr>
<td class="right">3</td>
<td class="left">Bomberman game</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc03/MinerSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc03/Miner.php">src</a></td>
<td class="left">spec src</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">4</td>
<td class="left">Monty Hall game</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc04/ZonkSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc04/Zonk.php">src</a></td>
<td class="left">spec src</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">5</td>
<td class="left">FizzBuzz</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc05/FizzBuzzSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc05/FizzBuzz.php">src</a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">6</td>
<td class="left">Recently used list</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc06/RecentlyUsedSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc06/RecentlyUsed.php">src</a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">7</td>
<td class="left">Template engine</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc07/TplrSpec.php">spec</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc07/Tplr.php">src</a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">8</td>
<td class="left">Range class</td>
<td class="left"><a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc08/IntRangeSpec.php">spec1</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc08/IntRange.php">src1</a> <a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc08/FloatRangeSpec.php">spec2</a> <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc08/FloatRange.php">src2</a></td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">9</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">10</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">11</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">12</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>

<tr>
<td class="right">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
<td class="left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">Excercise 2 -  Number speller</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Second excercise is little harder. Your task is to write number speller.
You give a number and your function will spell it. Simple isn't it?
</p>
</div>

<div id="outline-container-sec-2-1-1" class="outline-4">
<h4 id="sec-2-1-1">PHPSpec and PHP</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc02/NumberNamesSpec.php">https://github.com/exu/php-12bdds/blob/master/spec/Exc02/NumberNamesSpec.php</a>
</li>
<li>source: <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc02/NumberNames.php">https://github.com/exu/php-12bdds/blob/master/src/Exc02/NumberNames.php</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-1-2" class="outline-4">
<h4 id="sec-2-1-2">Golang and Ginkgo</h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/bddgo/blob/master/numnames_test.go">https://github.com/exu/bddgo/blob/master/numnames_test.go</a>
</li>
<li>source: <a href="https://github.com/exu/bddgo/blob/master/numnames.go">https://github.com/exu/bddgo/blob/master/numnames.go</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-1-3" class="outline-4">
<h4 id="sec-2-1-3">Javascript and Mocha</h4>
<div class="outline-text-4" id="text-2-1-3">
<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/jsbdds/blob/master/test/numnames.js">https://github.com/exu/jsbdds/blob/master/test/numnames.js</a>
</li>
<li>source: <a href="https://github.com/exu/jsbdds/blob/master/numnames.js">https://github.com/exu/jsbdds/blob/master/numnames.js</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">Excercise 1 -  Numbers statistics</h3>
<div class="outline-text-3" id="text-2-2">
<p>
First excercise is really warm-up, it's really simple task to calculate
some data (sum, avg, min, max, count) from given list of integers.
You'll find My solutions below. (all exercises are commited to repository from
given language and test framework)
</p>
</div>

<div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1">PHPSpec and PHP</h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
You can find details about <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-php-with-phpspec">my PHP solution in separate post</a>
</p>

<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/php-12bdds/blob/master/spec/Exc01/CalcStatsSpec.php">https://github.com/exu/php-12bdds/blob/master/spec/Exc01/CalcStatsSpec.php</a>
</li>
<li>source: <a href="https://github.com/exu/php-12bdds/blob/master/src/Exc01/CalcStats.php">https://github.com/exu/php-12bdds/blob/master/src/Exc01/CalcStats.php</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-2" class="outline-4">
<h4 id="sec-2-2-2">Golang and Ginkgo</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
You can find details about <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-golang-and-ginkgo">my Golang solution in separate post</a>
</p>

<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/bddgo/blob/master/stats_test.go">https://github.com/exu/bddgo/blob/master/stats_test.go</a>
</li>
<li>source: <a href="https://github.com/exu/bddgo/blob/master/stats.go">https://github.com/exu/bddgo/blob/master/stats.go</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-2-3" class="outline-4">
<h4 id="sec-2-2-3">Javascript and Mocha</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
You can find details about <a href="http://wysocki.in/programming/2014/03/excercise-1-calc-bdd-in-javascript-with-mocha">my Javascript solution in separate post</a>
</p>

<ul class="org-ul">
<li>Sources on github
<ul class="org-ul">
<li>spec: <a href="https://github.com/exu/jsbdds/blob/master/test/calc.js">https://github.com/exu/jsbdds/blob/master/test/calc.js</a>
</li>
<li>source: <a href="https://github.com/exu/jsbdds/blob/master/calc.js">https://github.com/exu/jsbdds/blob/master/calc.js</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">My Excercise status for languages of 12 tdds from wiredtothemoon blog</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>PHP - Completed <b>8</b> from 12
</li>
<li>Golang - Completed <b>4</b> from 12
</li>
<li>Javascript - Completed <b>2</b> from 12
</li>
</ul>

<p>
I'll try to complete some more (but don't know if I'll have enough time to play with that)
</p>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Tools used for writing BDD specs</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">PHP - PHPSpec</h3>
<div class="outline-text-3" id="text-4-1">
<p>
It's modern technique of writing your tests/specs in PHP world from Konstantin Kudryashov
(@everzet). It should be treaten like DSL (don't try to complain that it's not PSR
compatible).  You can find coverage tool for it too (but probably when You need it in spec
way you are doing something wrong). I You are PHPUnit guy (girl) then You should give PHPSpec
a try (If You don't write tests/specs for your new code hmm &#x2026; start doing it now!).
</p>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">Golang - Ginkgo</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Syntax in Ginkgo is very familiar to many known tools (Rspec from ruby or Mocha from javascript)
Your'e defining your expectations. It has many tools which make your Golang concurency easier.
</p>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">Javascript (Nodejs) - Mocha</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Mocha is written by TJ Holowaychuk author of very popular Express framework. It's really good
piece of software. You can install assert library of your choice (I've chosed should.js). Mocha
has nice async handling and could be used to write any kind of tests from spec/unit to end-to-end.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Setup</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">PHPSpec</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Look at:
<a href="https://github.com/exu/php-12bdds/blob/master/composer.json">https://github.com/exu/php-12bdds/blob/master/composer.json</a>
</p>

<p>
If You're bad PHP boy without knowledge about <a href="http://getcomposer.org">composer</a> you should
take a pen and piece of paper and write:
"I will use proper tools for my PHP development workflow!"
<b>two hundred times!</b>
</p>

<p>
Remember to call
</p>
<div class="org-src-container">

<pre class="src src-sh">composer install
</pre>
</div>

<p>
in your shell
</p>
</div>
</div>
<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Ginkgo</h3>
<div class="outline-text-3" id="text-5-2">
<p>
So You want to write some Golang code. Setup is really simple (<a href="https://github.com/onsi/ginkgo">https://github.com/onsi/ginkgo</a>)
Look at my repository for details <a href="https://github.com/exu/bddgo">https://github.com/exu/bddgo</a>
</p>
</div>
</div>
<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Mocha</h3>
<div class="outline-text-3" id="text-5-3">
<p>
run:
</p>

<div class="org-src-container">

<pre class="src src-sh">npm install mocha --save-dev
</pre>
</div>

<p>
and start writing your specs in tests directory.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Conclusions</h2>
<div class="outline-text-2" id="text-6">
<p>
I think that the slighty faster development time You can achieve in PHPSpec.  Main reason
for it are Its generators. Slighty more readable output in case of errors are in Mocha
IMHO in PHPSpec diffs are sometimes annoying (you need to go into verbose mode) and when
difference is in long string at the end you'll not receive valid diff.
</p>
</div>
</div>
